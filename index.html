<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Simulation de Trading</title>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; display: flex; height: 100vh; }
    #sidebar { width: 300px; background: #1e1e1e; color: #fff; padding: 10px; overflow-y: auto; }
    #main { flex: 1; background: #f4f4f4; padding: 10px; }
    .company { display: flex; justify-content: space-between; align-items: center; padding: 5px; background: #2a2a2a; margin-bottom: 5px; border-radius: 4px; }
    .company button { margin-left: 5px; }
    #portfolio { background: #fff; padding: 10px; margin-bottom: 10px; border-radius: 6px; }
    #tabs button { margin-right: 5px; }
    .tab { display: none; background: #fff; padding: 10px; border-radius: 6px; }
    .tab.active { display: block; }
  </style>
</head>
<body>

  <!-- BARRE GAUCHE -->
  <div id="sidebar">
    <h3>Entreprises</h3>
    <input type="text" id="search" placeholder="Rechercher..." style="width:100%; margin-bottom:10px;" />
    <div id="companies"></div>
  </div>

  <!-- PARTIE PRINCIPALE -->
  <div id="main">
    <div id="portfolio">
      <h3>Portefeuille</h3>
      <p>Capital disponible : <span id="cash"></span> €</p>
      <p>Investi : <span id="invested"></span> €</p>
      <div id="owned"></div>
    </div>

    <div id="tabs">
      <button onclick="openTab('graph')">Graphique</button>
      <button onclick="openTab('auto')">Trading Auto</button>
      <button onclick="openTab('stats')">Stats</button>
    </div>

    <div id="graph" class="tab active">
      <h3>Graphique (simulation)</h3>
      <p>Ici tu pourras afficher un graphique de prix.</p>
    </div>

    <div id="auto" class="tab">
      <h3>Trading automatique</h3>
      <button onclick="toggleBot()">Activer / Désactiver</button>
      <p id="botStatus">Bot désactivé</p>
    </div>

    <div id="stats" class="tab">
      <h3>Statistiques</h3>
      <p>Gains / pertes, historique…</p>
    </div>
  </div>

<script>
  let cash = 10000;
  let invested = 0;
  let botActive = false;

  const companies = Array.from({length: 50}, (_, i) => ({
    name: 'Entreprise ' + (i + 1),
    price: Math.floor(Math.random() * 200) + 20,
    owned: 0
  }));

  function renderCompanies() {
    const list = document.getElementById('companies');
    list.innerHTML = '';
    companies.forEach(c => {
      const div = document.createElement('div');
      div.className = 'company';
      div.innerHTML = `
        <span>${c.name} (${c.price}€)</span>
        <div>
          <button onclick="buy('${c.name}')">+</button>
          <button onclick="sell('${c.name}')">-</button>
        </div>`;
      list.appendChild(div);
    });
  }

  function buy(name) {
    const c = companies.find(e => e.name === name);
    if (cash >= c.price) {
      cash -= c.price;
      invested += c.price;
      c.owned++;
      updatePortfolio();
    }
  }

  function sell(name) {
    const c = companies.find(e => e.name === name);
    if (c.owned > 0) {
      cash += c.price;
      invested -= c.price;
      c.owned--;
      updatePortfolio();
    }
  }

  function updatePortfolio() {
    document.getElementById('cash').textContent = cash;
    document.getElementById('invested').textContent = invested;
    const ownedDiv = document.getElementById('owned');
    ownedDiv.innerHTML = '<strong>Actions possédées :</strong><br>';
    companies
      .filter(c => c.owned > 0)
      .sort((a,b) => b.owned - a.owned)
      .forEach(c => ownedDiv.innerHTML += `${c.name} : ${c.owned}<br>`);
  }

  function openTab(id) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }

  function toggleBot() {
    botActive = !botActive;
    document.getElementById('botStatus').textContent = botActive ? 'Bot activé' : 'Bot désactivé';
  }

  renderCompanies();
  updatePortfolio();
</script>

</body>
</html>
